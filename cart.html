<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="https://b-oneinterior.com/logo.png">
  <meta name="twitter:image" content="https://b-oneinterior.com/logo.png">
  <title>Your Shopping Cart - Secure Checkout | B-One Interior</title>
  <meta property="og:title" content="Your Shopping Cart - Secure Checkout | B-One Interior">
  <meta property="og:description"
    content="Review your selected items in the cart. Proceed to inquiry or checkout securely. Complete your purchase of premium home decor and furniture at B-One Interior.">
  <script src="assets/js/tailwind.min.js"></script>
  <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
  <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/owl.carousel.min.js"></script>
  <script type="module" src="assets/js/ionicons/ionicons.esm.js"></script>
  <link rel="stylesheet" href="style.css?v=1">

</head>


<body class="bg-black">
  <!-- Header -->
  <header class="bg-black shadow-lg sticky top-0 z-50 border-b border-gold-700 pt-1">
    <nav class="container mx-auto px-4 py-4 flex items-center justify-between" id="desktop-nav">
      <div class="text-2xl font-bold text-gold-500"><img src="logo.png" style="height: 8vh;" alt=""></div>

      <ul class="hidden md:flex space-x-6 text-gray-300">
        <li><a href="https://b-oneinterior.com/" class="hover:text-gold-500 transition">Home</a></li>
        <li><a href="https://b-oneinterior.com/shop" class="hover:text-gold-500 transition">Shop</a></li>
        <li><a href="https://b-oneinterior.com/company" class="hover:text-gold-500 transition">Services</a></li>
        <li><a href="https://b-oneinterior.com/gallery" class="hover:text-gold-500 transition">Gallery</a></li>
        <li><a href="https://b-oneinterior.com/cart" class="hover:text-gold-500 transition">Cart</a></li>
        <li id="authLinkDesktop"></li>
      </ul>
      <button class="md:hidden text-gold-500">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </nav>



    <div id="drawer">
      <ul>
        <li><a href="https://b-oneinterior.com/company">Company</a></li>
        <li><a href="https://b-oneinterior.com/shop">Shop</a></li>
        <li><a href="https://b-oneinterior.com/company">Services</a></li>
        <li><a href="https://b-oneinterior.com/gallery">Gallery</a></li>
        <li><a href="https://b-oneinterior.com/#contact">Contact Us</a></li>
        <li><a href="terms.html">Terms and Conditions</a></li>
        <li><a href="privacy.html">Privacy Policy</a></li>
        <li id="authLinkDrawer"></li>
      </ul>
    </div>
    <label for="menu-toggle" class="overlay"></label>

    <div class="fixedBottom">
      <a href="https://b-oneinterior.com/" class="logoBx"></a>
      <ul>
        <li>
          <a href="https://b-oneinterior.com/gallery">
            <ion-icon name="images-outline"></ion-icon>
            <div>Gallery</div>
          </a>
        </li>

        <li>
          <a href="https://b-oneinterior.com/catalogue">
            <ion-icon name="document-text-outline"></ion-icon>
            <div>Catalogue</div>
          </a>
        </li>

        <li>
          <a href="https://b-oneinterior.com/login">
            <ion-icon name="log-in-outline"></ion-icon>
            <div>Login</div>
          </a>
        </li>
        <li></li>

        <li>
          <div class="cursor-pointer" onclick="toggleDrawer()">
            <ion-icon name="menu-outline" class="text-[#D4AF37] text-2xl"></ion-icon>
            <div>Menu</div>
          </div>
        </li>

        <li>
          <a href="https://b-oneinterior.com/shop">
            <ion-icon name="storefront-outline"></ion-icon>
            <div>Shop</div>
          </a>
        </li>

        <li>
          <a href="https://b-oneinterior.com/cart">
            <ion-icon name="cart-outline"></ion-icon>
            <div>Cart</div>
            <span id="cartCountBadge" class="absolute -top-2 -right-3 bg-gold text-black text-xs font-bold 
                                w-5 h-5 flex items-center justify-center rounded-full hidden">
            </span>
          </a>
        </li>
      </ul>
    </div>
    <script>
      function toggleDrawer() {
        const drawer = document.getElementById("drawer");
        const overlay = document.querySelector(".overlay");
        if (drawer.style.left === "0px") {
          drawer.style.left = "-250px";
          overlay.style.opacity = "0";
          overlay.style.pointerEvents = "none";
        } else {
          drawer.style.left = "0px";
          overlay.style.opacity = "1";
          overlay.style.pointerEvents = "auto";
        }
      }

      const overlay = document.querySelector(".overlay");
      overlay.addEventListener("click", () => {
        const drawer = document.getElementById("drawer");
        drawer.style.left = "-250px";
        overlay.style.opacity = "0";
        overlay.style.pointerEvents = "none";
      });

      // Auth check and navigation update
      function checkAuth() {
        const token = localStorage.getItem('saleor_auth_token');
        const userEmail = localStorage.getItem('saleor_user_email');
        const desktopLink = document.getElementById('authLinkDesktop');
        const drawerLink = document.getElementById('authLinkDrawer');

        if (token && userEmail) {
          if (desktopLink) {
            desktopLink.innerHTML = `<a href="#" onclick="signOut()" class="hover:text-gold-500 transition">Sign Out</a>`;
          }
          if (drawerLink) {
            drawerLink.innerHTML = `<a href="#" onclick="signOut()">Sign Out (${userEmail})</a>`;
          }
        } else {
          if (desktopLink) {
            desktopLink.innerHTML = `<a href="login.html" class="hover:text-gold-500 transition">Login</a>`;
          }
          if (drawerLink) {
            drawerLink.innerHTML = `<a href="login.html">Login</a>`;
          }
        }
      }

      function signOut() {
        localStorage.removeItem('saleor_auth_token');
        localStorage.removeItem('saleor_refresh_token');
        localStorage.removeItem('saleor_csrf_token');
        localStorage.removeItem('saleor_user_email');
        localStorage.removeItem('saleor_user_name');
        window.location.reload();
      }

      document.addEventListener('DOMContentLoaded', checkAuth);
    </script>
  </header>


  <div class="container mx-auto p-6 space-y-6">

    <h1 class="text-2xl font-bold mb-4 golden-text">Shopping Cart</h1>

    <div id="cartItems" class="space-y-4"></div>

    <div class="flex justify-end mt-6">
      <button
        class="inquiry-btn px-8 py-3 rounded-full text-sm font-medium bg-gold text-white hover:opacity-90 shadow-lg transition">Send
        whatsapp inquiry</button>
    </div>

  </div>

  <script>
    function loadCart() {
      const container = document.getElementById("cartItems");
      const list = JSON.parse(localStorage.getItem("inquiryList") || "[]");

      if (list.length === 0) {
        container.innerHTML = `<p class="text-gray-500 text-center py-10">Your cart is empty.</p>`;
        return;
      }

      let grandTotal = 0;

      const itemsHtml = list.map(item => {
        let price = parseFloat(item.price);
        if (isNaN(price)) price = 0;

        const qty = parseInt(item.quantity || 1);
        const total = price * qty;
        grandTotal += total;

        // Handle currency simply
        const currency = item.currency === 'INR' ? '₹' : (item.currency || '');
        const totalStr = item.currency === 'INR' ? `₹${total.toFixed(2)}` : `${total.toFixed(2)} ${item.currency}`;

        return `
        <tr class="border-b hover:bg-gray-50 align-top">
            <!-- Product Column -->
            <td class="p-2 w-1/2">
                <div class="relative w-full mb-2">
                    <img src="${item.image}" class="w-full h-auto object-cover rounded-md shadow-sm aspect-[4/3]">
                    <button class="exclude-btn absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 shadow-md transition" data-id="${item.id}">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <p class="font-semibold text-gray-800 text-sm leading-tight">${item.name}</p>
            </td>
            
            <!-- Qty Column -->
            <td class="p-2 text-center align-middle">
                 <span class="font-bold text-gray-900 bg-gray-100 py-1 px-3 rounded-full text-sm">${qty}</span>
            </td>
            
            <!-- Total Column -->
            <td class="p-2 text-right align-middle">
                <span class="font-bold text-gold text-sm whitespace-nowrap">${totalStr}</span>
            </td>
        </tr>
        `;
      }).join("");

      container.innerHTML = `
        <div class="overflow-x-auto bg-white shadow rounded-lg">
            <table class="w-full text-left border-collapse table-auto">
                <thead>
                    <tr class="bg-gray-100 text-gray-600 uppercase text-xs leading-normal">
                        <th class="p-2 w-1/2">Product</th>
                        <th class="p-2 text-center">Qty</th>
                        <th class="p-2 text-right">Total</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700 text-sm">
                    ${itemsHtml}
                </tbody>
                <tfoot>
                    <tr class="bg-gray-50 font-bold text-gray-800">
                        <td class="p-4 text-right" colspan="2">Grand Total:</td>
                        <td class="p-4 text-right text-lg text-gold">₹${grandTotal.toFixed(2)}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
      `;

      document.querySelectorAll(".exclude-btn").forEach(btn => {
        btn.onclick = () => {
          const id = btn.dataset.id;
          let list = JSON.parse(localStorage.getItem("inquiryList") || "[]");
          list = list.filter(i => i.id !== id);
          localStorage.setItem("inquiryList", JSON.stringify(list));
          loadCart(); // Refresh
          updateCartBadge();
        };
      });
    }
    function updateCartBadge() {
      const badge = document.getElementById("cartCountBadge");
      if (!badge) return; // Badge element may not exist

      const list = JSON.parse(localStorage.getItem("inquiryList") || "[]");
      const count = list.length;

      if (count > 0) {
        badge.textContent = count;
        badge.classList.remove("hidden");
      } else {
        badge.classList.add("hidden");
      }
    }



    function sendWhatsappInquiry() {
      const list = JSON.parse(localStorage.getItem("inquiryList") || "[]");
      if (list.length === 0) return alert("Your cart is empty.");

      let message = "Hi, I am interested in the following products:\n";
      let grandTotal = 0;

      list.forEach((item, index) => {
        let price = parseFloat(item.price);
        if (isNaN(price)) price = 0;
        const qty = parseInt(item.quantity || 1);
        const total = price * qty;
        grandTotal += total;

        const currency = item.currency === 'INR' ? '₹' : (item.currency || '');
        const priceStr = item.currency === 'INR' ? `₹${price.toFixed(2)}` : `${price.toFixed(2)} ${item.currency}`;
        const totalStr = item.currency === 'INR' ? `₹${total.toFixed(2)}` : `${total.toFixed(2)} ${item.currency}`;

        message += `${index + 1}. *${item.name}*\n`;
        message += `   Qty: ${qty}\n`;
        message += `   Price: ${priceStr}\n`;
        message += `   Total: ${totalStr}\n\n`;
      });

      message += `*Grand Total: ₹${grandTotal.toFixed(2)}*`;

      const phoneNumber = "917738130131";
      const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }

    document.querySelector('.inquiry-btn').addEventListener('click', sendWhatsappInquiry);

    loadCart();
    updateCartBadge();


  </script>

  <script src="placeholder.js"></script>
</body>

</html>